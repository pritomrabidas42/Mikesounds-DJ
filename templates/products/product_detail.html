{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2>{{ product.title }}</h2>

<div class="product-images">
    {% for image in product.images.all %}
        <img src="{{ image.image.url }}" alt="{{ product.title }}" width="200" height="200">
    {% endfor %}
</div>

<p><strong>Brand:</strong> {{ product.brand.name }}</p>
<p><strong>Description:</strong> {{ product.description }}</p>

    <p><strong>Price:</strong>
    {% if product.variations.exists %}
  {% with first_var=product.variations.all|first %}
    {{ first_var.price }}
  {% endwith %}
{% else %}
  {{ product.price }}
{% endif %}

</p>

<form method="post" action="{% url 'add_to_cart' product.id %}">
    {% csrf_token %}
    {% if product.variations.exists %}
        <label for="variation">Select Variation:</label>
        <select name="variation_id" id="variation">
            {% for var in product.variations.all %}
                <option value="{{ var.id }}">{{ var.size }} - ${{ var.price }}</option>
            {% endfor %}
        </select>
    {% endif %}

    <label for="quantity">Quantity:</label>
    <input type="number" name="quantity" id="quantity" value="1" min="1">

    <button type="submit">Add to Cart</button>
</form>
<p><a href="{% url 'product_list' %}">Back to Product List</a></p>
{% endblock %}
